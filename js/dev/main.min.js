(function(){"use strict";var e={};e.Init=function(){e.service="",e.username="",e.iframe_theme="",e.image_theme="",e.Cache(),e.BindListeners(),e.Methods(),e.Util(),e.generateCode(),e.matchMediaTest(),e.mediaSwitch(),window.onresize=function(){e.matchMediaTest()},e.dom.footer_section_ad.html("<iframe src='/ads/footer.html' style='border:none;height:250px;width:250px;'></iframe>");var t=new Date;e.dom.year.html(t.getFullYear()),e.dom.justin_widget.length&&e.justinWidget(),e.dom.twitch_widget.length&&e.twitchWidget(),e.dom.ustream_widget.length&&e.ustreamWidget()},e.Cache=function(){e.dom={},e.dom.iframe_code=$("#iframe-code"),e.dom.html_code=$("#html-code"),e.dom.bbcode_code=$("#bbcode-code"),e.dom.iframe_code_mobile=$("#iframe-code-mobile"),e.dom.html_code_mobile=$("#html-code-mobile"),e.dom.bbcode_code_mobile=$("#bbcode-code-mobile"),e.dom.twitch_button=$("#twitch-button"),e.dom.justin_button=$("#justin-button"),e.dom.ustream_button=$("#ustream-button"),e.dom.theme_light=$("#theme-light"),e.dom.theme_dark=$("#theme-dark"),e.dom.theme_custom=$("#theme-custom"),e.dom.color_selector=$(".color-selector"),e.dom.color_selectors=$(".color-selectors"),e.dom.bg_color=$("#bg-color"),e.dom.link_color=$("#link-color"),e.dom.text_color=$("#text-color"),e.dom.iframe_image_bbcode_preview=$(".iframe-preview,.image-preview,.bbcode-preview"),e.dom.preview=$(".preview"),e.dom.username_input=$("#username-input"),e.dom.section_code_code=$("#section-code, .code"),e.dom.button=$(".button"),e.dom.iframe_html_bbcode_code=$("#iframe-code, #html-code, #bbcode-code"),e.dom.iframe_preview_button=$("#iframe-preview-button"),e.dom.iframe_preview=$("#iframe-preview"),e.dom.iframe_preview_class=$(".iframe-preview"),e.dom.image_preview_button=$("#image-preview-button"),e.dom.image_preview=$("#image-preview"),e.dom.image_preview_class=$(".image-preview"),e.dom.bbcode_preview_button=$("#bbcode-preview-button"),e.dom.bbcode_preview=$("#bbcode-preview"),e.dom.bbcode_preview_class=$(".bbcode-preview"),e.dom.section_theme=$("#section-theme"),e.dom.theme_input=$(".theme-input"),e.dom.section_username_section_code_code=$("#section-username, #section-code, .code"),e.dom.section_username=$("#section-username"),e.dom.year=$("#year"),e.dom.logo=$("#logo"),e.dom.header_ad=$(".header-ad"),e.dom.footer_section_ad=$(".footer-section.ad"),e.dom.twitch_widget=$("#twitch-widget"),e.dom.justin_widget=$("#justin-widget"),e.dom.ustream_widget=$("#ustream-widget")},e.BindListeners=function(){e.dom.button.on("click",function(){var t=$(this);t.hasClass("active")?e.serviceButtonClick(t,""):e.serviceButtonClick(t,t.data("button"))}),e.dom.theme_input.on("click",function(){var t=$(this).data("theme");switch(t){case"light":e.iframe_theme="&theme=light",e.image_theme="light/",e.dom.color_selectors.slideUp();break;case"dark":e.iframe_theme="&theme=dark",e.image_theme="dark/",e.dom.color_selectors.slideUp();break;case"custom":e.iframe_theme="&theme=custom&bg="+e.dom.bg_color.val().replace("#","")+"&link="+e.dom.link_color.val().replace("#","")+"&text="+e.dom.text_color.val().replace("#",""),e.image_theme="custom/"+e.dom.bg_color.val().replace("#","")+"/"+e.dom.link_color.val().replace("#","")+"/"+e.dom.text_color.val().replace("#","")+"/",e.dom.color_selectors.slideToggle();break;default:e.iframe_theme="&theme=light",e.image_theme="light/",e.dom.color_selectors.slideUp()}""===e.dom.username_input&&e.dom.preview.addClass("available").removeClass("active"),e.dom.iframe_image_bbcode_preview.slideUp(),e.generateCode()}),e.dom.color_selector.on("change",function(){var t,i,a,s,m;switch(t=$(this).data("color-selector"),i=e.dom.bg_color.val().replace("#",""),a=e.dom.link_color.val().replace("#",""),s=e.dom.text_color.val().replace("#",""),m=$(this).val().replace("#",""),t){case"bg-color":e.iframe_theme="&theme=custom&bg="+m+"&link="+a+"&text="+s,e.image_theme="custom/"+m+"/"+a+"/"+s+"/";break;case"link-color":e.iframe_theme="&theme=custom&bg="+i+"&link="+m+"&text="+s,e.image_theme="custom/"+i+"/"+m+"/"+s+"/";break;case"text-color":e.iframe_theme="&theme=custom&bg="+i+"&link="+a+"&text="+m,e.image_theme="custom/"+i+"/"+a+"/"+m+"/";break;default:}e.dom.iframe_image_bbcode_preview.slideUp(),""!==e.username&&e.dom.preview.addClass("available").removeClass("active"),e.generateCode()}),e.dom.username_input.keyup(function(){var t=$(this);""===t.val()?(t="",e.dom.section_code_code.removeClass("active"),e.dom.preview.removeClass("available").removeClass("active")):(e.dom.section_code_code.addClass("active"),e.dom.button.hasClass("active")?e.dom.preview.addClass("available").removeClass("active"):e.dom.preview.removeClass("available").removeClass("active")),e.username=t.val(),e.dom.iframe_image_bbcode_preview.slideUp(),e.generateCode()}),e.dom.iframe_html_bbcode_code.on("focus",function(){var e=$(this);e.select(),e.on("mouseup",function(){return e.unbind("mouseup"),!1})}),e.dom.preview.on("click",function(){var t,i;switch(t=$(this),i=t.data("preview")){case"iframe":e.dom.iframe_preview.attr("src","http://streambadge.com/"+e.service+"/?username="+e.username+e.iframe_theme),e.dom.iframe_preview_class.slideToggle();break;case"image":e.dom.image_preview.attr("src","http://streambadge.com/"+e.service+"/"+e.image_theme+e.username+".png"),e.dom.image_preview_class.slideToggle();break;case"bbcode":e.dom.bbcode_preview.attr("src","http://streambadge.com/"+e.service+"/"+e.image_theme+e.username+".png"),e.dom.bbcode_preview_class.slideToggle();break;default:}return t.toggleClass("available").toggleClass("active"),!1})},e.Methods=function(){e.generateCode=function(){e.dom.iframe_code.html('<iframe src="http://streambadge.com/'+e.service+"/?username="+e.username+e.iframe_theme+'" style="border:none;height:64px;width:100%"></iframe>'),e.dom.html_code.html('<a href="http://'+e.service+".tv/"+e.username+'"><img src="http://streambadge.com/'+e.service+"/"+e.image_theme+e.username+'.png" width="300" height="64" alt="Image of '+e.username+"'s Streambadge\"></a>"),e.dom.bbcode_code.html("[url=http://"+e.service+".tv/"+e.username+"][img]http://streambadge.com/"+e.service+"/"+e.image_theme+e.username+".png[/img][/url]"),e.dom.iframe_code_mobile.html('&lt;iframe src="http://streambadge.com/'+e.service+"/?username="+e.username+e.iframe_theme+'" style="border:none;height:64px;width:100%"&gt;&lt;/iframe&gt;'),e.dom.html_code_mobile.html('&lt;a href="http://'+e.service+".tv/"+e.username+'"&gt;&lt;img src="http://streambadge.com/'+e.service+"/"+e.image_theme+e.username+'.png" width="300" height="64" alt="Image of '+e.username+"'s Streambadge\"&gt;&lt;/a&gt;"),e.dom.bbcode_code_mobile.html("[url=http://"+e.service+".tv/"+e.username+"][img]http://streambadge.com/"+e.service+"/"+e.image_theme+e.username+".png[/img][/url]")},e.serviceButtonClick=function(t,i){"twitch"===i?e.dom.section_theme.slideDown():(e.dom.section_theme.slideUp(),e.iframe_theme="",e.image_theme="",e.dom.theme_input.prop("checked",!1),e.dom.color_selectors.slideUp()),t.hasClass("active")?(e.dom.button.removeClass("active").removeClass("disabled"),e.dom.username_input.val(""),e.username="",e.dom.username_input.attr("readonly","readonly").addClass("readonly"),e.dom.section_username_section_code_code.removeClass("active"),e.dom.preview.removeClass("available")):(e.dom.button.addClass("disabled").removeClass("active"),e.dom.username_input.removeAttr("readonly").removeClass("readonly").focus(),e.dom.section_username.addClass("active"),t.addClass("active").removeClass("disabled"),""===e.dom.username_input.val()?e.dom.preview.removeClass("available"):e.dom.preview.addClass("available")),e.dom.iframe_image_bbcode_preview.slideUp(),e.dom.preview.removeClass("active"),e.service=i,e.generateCode()},e.matchMediaTest=function(){var t=e.currentMedia;matchMedia("only screen and (max-width: 30em)").matches?e.currentMedia="small":matchMedia("only screen and (min-width: 30em) and (max-width: 45em)").matches?e.currentMedia="medium":matchMedia("only screen and (min-width: 45em)").matches&&(e.currentMedia="large"),t!==e.currentMedia&&e.mediaSwitch()},e.mediaSwitch=function(){switch(e.currentMedia){case"none":e.dom.header_ad.empty();break;case"small":e.dom.header_ad.empty().html('<iframe src="ads/header-medium.html" style="border:none;height:60px;width:234px;"></iframe>');break;case"medium":e.dom.header_ad.empty().html('<iframe src="/ads/header-wide.html" style="border:none;height:60px;width:468px;"></iframe>');break;case"large":e.dom.header_ad.empty().html('<iframe src="/ads/header-super.html" style="border:none;height:90px;width:728px;"></iframe>');break;default:}},e.justinWidget=function(){e.justin_widget={},e.justin_widget.$justin_widget=e.dom.justin_widget,e.justin_widget.username=e.queryString.username,e.justin_widget.username===void 0||""===e.justin_widget.username?e.justin_widget.html("<ul><li>Please add a username</li></ul>"):$.getJSON("http://api.justin.tv/api/stream/list.json?channel="+e.justin_widget.username+"&jsonp=?",function(t){t[0]?e.justin_widget.$justin_widget.html('<ul class="justin-widget-list"><li class="user-name"><a href="http://justin.tv/'+e.justin_widget.username+'" target="_blank"><img src="'+t[0].channel.image_url_small+'" width="44" height="44" alt="'+e.justin_widget.username+' channel logo" class="icon">'+e.justin_widget.username+'</a></li><li class="live"><b>LIVE</b> <span class="online"></span> '+t[0].title+'</li><li class="viewers"><img src="/img/eye-gray.png" width="14" height="14" alt="" class="icon-eye"> '+t[0].channel_count+"</li></ul>"):$.getJSON("http://api.justin.tv/api/channel/show/list.json?channel="+e.justin_widget.username+"&jsonp=?",function(t){e.justin_widget.$justin_widget.html('<ul class="justin-widget-list"><li><a href="http://justin.tv/'+e.justin_widget.username+'" class="user-name" target="_blank"><img src="'+t.image_url_small+'" width="44" height="44" alt="'+e.justin_widget.username+' channel logo" class="icon">'+e.justin_widget.username+'</a></li><li class="live"><b>Offline</b></li></ul>')})})},e.twitchWidget=function(){e.twitch_widget={},e.twitch_widget.api_key="5j0r5b7qb7kro03fvka3o8kbq262wwm",e.twitch_widget.username=e.queryString.username,e.twitch_widget.theme=e.queryString.theme?e.queryString.theme:"light",e.twitch_widget.bg_color='style="background:#'+e.queryString.bg+'"',e.twitch_widget.link_color='style="color:#'+e.queryString.link+'"',e.twitch_widget.text_color='style="color:#'+e.queryString.text+'"',e.twitch_widget.$twitch_widget=e.dom.twitch_widget,e.twitch_widget.username===void 0||""===e.twitch_widget.username?e.twitch_widget.$twitch_widget.html('<div class="twitch-widget '+e.twitch_widget.theme+'" '+e.twitch_widget.bg_color+"><ul><li "+e.twitch_widget.text_color+">Please add a username</li></ul></div>"):$.getJSON("https://api.twitch.tv/kraken/streams/"+e.twitch_widget.username+"?client_id="+e.twitch_widget.api_key+"&callback=?",function(t){t.stream?(e.twitch_widget.image=t.stream.channel.logo?t.stream.channel.logo:"/img/twitch-no-image.png",e.twitch_widget.$twitch_widget.html('<div class="twitch-widget '+e.twitch_widget.theme+'" '+e.twitch_widget.bg_color+'><ul class="twitch-widget-list"><li class="user-name"><a href="http://twitch.tv/"'+e.twitch_widget.username+'" target="_blank" '+e.twitch_widget.link_color+'><img src="'+e.twitch_widget.image+'" width="44" height="44" alt="'+e.twitch_widget.username+'" channel logo" class="icon">'+e.twitch_widget.username+'</a></li><li class="live" '+e.twitch_widget.text_color+'><b>LIVE</b> <span class="online"></span> playing '+(t.stream.game?'<a href="http://www.twitch.tv/directory/game/'+encodeURIComponent(t.stream.game)+'" target="_blank" '+e.twitch_widget.link_color+">"+t.stream.game+"</a>":"")+'</li><li class="viewers" '+e.twitch_widget.text_color+'><span aria-hidden="true" class="icon-eye"></span><span class="viewer-number">'+t.stream.viewers+"</span></li></ul></div>")):$.getJSON("https://api.twitch.tv/kraken/channels/"+e.twitch_widget.username+"?client_id="+e.twitch_widget.api_key+"&callback=?",function(t){e.twitch_widget.image=t.logo?t.logo:"/img/twitch-no-image.png",e.twitch_widget.$twitch_widget.html('<div class="twitch-widget '+e.twitch_widget.theme+'" '+e.twitch_widget.bg_color+'><ul class="twitch-widget-list"><li><a href="http://twitch.tv/'+e.twitch_widget.username+'" class="user-name" target="_blank" '+e.twitch_widget.link_color+'><img src="'+e.twitch_widget.image+'" width="44" height="44" alt="'+e.twitch_widget.username+' channel logo" class="icon">'+e.twitch_widget.username+'</a></li><li class="live" '+e.twitch_widget.text_color+"><b>Offline</b></li></ul></div>")})})},e.ustreamWidget=function(){e.ustream_widget={},e.ustream_widget.$ustream_widget=e.dom.ustream_widget,e.ustream_widget.api_key="EE028473488E26E1424E67B209A3C423",e.ustream_widget.username=e.queryString.username,e.ustream_widget.username===void 0||""===e.ustream_widget.username?e.ustream_widget.$ustream_widget.html("<ul><li>Please add a username</li></ul>"):$.getJSON("http://api.ustream.tv/json/channel/live/search/username:eq:"+e.ustream_widget.username+"?key="+e.ustream_widget.api_key+"&callback=?",function(t){null!==t?e.ustream_widget.$ustream_widget.html('<ul class="ustream-widget-list"><li class="user-name"><a href="http://ustream.tv/'+e.ustream_widget.username+'" target="_blank"><img src="'+t[0].imageUrl.small+'" width="44" height="44" alt="'+e.ustream_widget.username+' channel logo" class="icon">'+e.ustream_widget.username+'</a></li><li class="live"><b>LIVE</b> <span class="online"></span> '+t[0].title+'</li><li class="viewers"><img src="/img/eye-gray.png" width="14" height="14" alt="" class="icon-eye"> '+t[0].viewersNow+"</li></ul>"):$.getJSON("http://api.ustream.tv/json/user/"+e.ustream_widget.username+"/getInfo?key="+e.ustream_widget.api_key+"&callback=?",function(t){null!==t?e.ustream_widget.$ustream_widget.html('<ul class="ustream-widget-list"><li class="user-name"><a href="http://ustream.tv/'+e.ustream_widget.username+'" target="_blank"><img src="'+t.imageUrl.small+'" width="44" height="44" alt="'+e.ustream_widget.username+' channel logo" class="icon">'+e.ustream_widget.username+'</a></li><li class="live"><b>Offline</b></li></ul>'):e.ustream_widget.$ustream_widget.html('<ul class="ustream-widget-list"><li class="user-name"><a href="http://ustream.tv/'+e.ustream_widget.username+'" target="_blank"><img src="/img/ustream-no-image.png" width="44" height="44" alt="" class="icon">'+e.ustream_widget.username+'</a></li><li class="live"><b>Offline</b></li></ul>')})})}},e.Util=function(){e.queryString=function(){for(var e={},t=window.location.search.substring(1),i=t.split("&"),a=0;i.length>a;a++){var s=i[a].split("=");if(e[s[0]]===void 0)e[s[0]]=s[1];else if("string"==typeof e[s[0]]){var m=[e[s[0]],s[1]];e[s[0]]=m}else e[s[0]].push(s[1])}return e}()},e.Init()})();